This is a car perception simulator for Unity3D developed as an perception pipeline testing tool for \href{https://einstein-motorsport.com/}{\texttt{ Einstein Motorsport}}. It currently supports the simulation of a Lidar sensor as well as a camera and can send this data live to ROS for inference.

Scene view\+:



Scene view + perception Debug\+:



RVIZ view\+:

\hypertarget{md_README_autotoc_md1}{}\doxysection{Credit}\label{md_README_autotoc_md1}

\begin{DoxyItemize}
\item The ROS-\/\+Connection is done through \href{https://github.com/Unity-Technologies/Unity-Robotics-Hub}{\texttt{ Unity\textquotesingle{}s own ROS Integration}} which is largely based on Dr. Martin Bischoffs \href{https://github.com/MartinBischoff/ros-sharp}{\texttt{ ROS-\/\+Sharp}}
\item The Track tool is based on Sebastian Lagues \href{https://github.com/SebLague/Path-Creator}{\texttt{ Path Creator}}
\item The cone models were created by \href{https://github.com/RoostOne}{\texttt{ Torsten Hahn}} 
\end{DoxyItemize}\hypertarget{md_README_autotoc_md2}{}\doxysection{Installation}\label{md_README_autotoc_md2}
\hypertarget{md_README_autotoc_md3}{}\doxysubsection{Unity Side}\label{md_README_autotoc_md3}

\begin{DoxyItemize}
\item Clone this repo
\item Open it in Unity 2021.\+0+
\item Install Unity\textquotesingle{}s \href{https://github.com/Unity-Technologies/ROS-TCP-Connector}{\texttt{ ROS-\/\+TCP-\/\+Connector}}
\item Insert the local IP of your machine running ROS into the ROS Connection Gameobject in the hirarchy
\item Download Newsofts Json tool from here \href{https://github.com/jilleJr/Newtonsoft.Json-for-Unity}{\texttt{ https\+://github.\+com/jille\+Jr/\+Newtonsoft.\+Json-\/for-\/\+Unity}} and install it as well (Unitys own Json Utility doesnÂ´t work reliably for me)
\end{DoxyItemize}\hypertarget{md_README_autotoc_md4}{}\doxysubsection{ROS Side}\label{md_README_autotoc_md4}

\begin{DoxyItemize}
\item Clone Unity\textquotesingle{}s \href{https://github.com/Unity-Technologies/ROS-TCP-Endpoint}{\texttt{ ROS-\/\+TCP-\/\+Endpoint}} into your catkin Workspace /src folder
\item Copy Unitys\textquotesingle{}s \href{https://github.com/Unity-Technologies/Unity-Robotics-Hub/blob/main/tutorials/ros_packages/robotics_demo/scripts/server_endpoint.py}{\texttt{ server\+\_\+endpoint.\+py}} into your scripts folder and make two duplicates of it
\item Add an image raw publisher to the first and give it the port 10001
\item Add an pointcloud publisher to the first and give it the port 10002
\item catkin\+\_\+make
\item add the source command (e.\+g. \char`\"{}source $\sim$/catkin\+\_\+ws/devel/setup.\+bash\char`\"{}) to your .bashrc
\item start roscore
\item edit the config yaml under ROS-\/\+TCP-\/\+Endpoint/config/params.\+yaml and insert your local IPv4 address
\item load this config file with rosparam load
\item rosrun the two server\+\_\+endpoints from earlier
\end{DoxyItemize}\hypertarget{md_README_autotoc_md5}{}\doxysubsection{If you run ROS on a VM}\label{md_README_autotoc_md5}
Make sure to use a bridged network adapter and allow permiscuous use\hypertarget{md_README_autotoc_md6}{}\doxysection{Roadmap/\+Todo}\label{md_README_autotoc_md6}

\begin{DoxyItemize}
\item \mbox{[}X\mbox{]} Read Camera pixels in Compute Shader instead of on the CPU for higher performance
\item \mbox{[}X\mbox{]} Maybe call ros.\+Send() in seperate thread (improved performance from about 5hz to 10hz)
\item \mbox{[}X\mbox{]} Try multiple simultaneous connections (improved performance from 10 hz to 15hz for the lidar and 25 hz for the camera)
\item \mbox{[}X\mbox{]} Add track tool
\item \mbox{[}X\mbox{]} Add track-\/follow tool
\item \mbox{[}X\mbox{]} Add models for official Formula Student cones (Thanks to Torsten Hahn)
\item \mbox{[}X\mbox{]} Create callbacks for Controler output, so that the perception pipeline output, can be used as inputs for this sim for a feedback loop
\item \mbox{[}X\mbox{]} Add groundspeed sensor publisher (Added Car\+State Publisher)
\item \mbox{[} \mbox{]} Try interpreting the uint Array coming from the compute shader as byte Array to get rid of the loop.
\item \mbox{[} \mbox{]} Add noise slider for Lidar
\item \mbox{[} \mbox{]} Add rostf state publisher
\item \mbox{[} \mbox{]} Make this README better
\item \mbox{[} \mbox{]} Use Universal Renderpipeline for more realistic graphics
\item \mbox{[} \mbox{]} implement realistic car physics 
\end{DoxyItemize}